# -*- coding: utf-8 -*-
"""Copy of Welcome To Colab

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1jdXIueOEOlUmc7uJte6QxJHP2msKKfG6
"""

import pandas as pd

df = pd.read_csv("/content/Ø¯ÛŒØªØ§Ø³Øª Ú†Ø§Ù„Ø´ 1  Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ.csv")
display(df.head())

print(df.info(
    ))

import seaborn as sns

import matplotlib.pyplot as plt

df[df["sleep_hours_per_day"] > 12]

numeric_cols = df.select_dtypes(include=["float64","int64"]).columns

for col in numeric_cols:
  q1 = df[col].quantile(0.25)
  q3 = df[col].quantile(0.75)
  iqr = q3 - q1

outliers_list = []
for col in numeric_cols:
  q1 = df[col].quantile(0.25)
  q3 = df[col].quantile(0.75)
  iqr = q3 - q1

  lower_bound = q1 - 1.5*iqr
  upper_bound = q3 + 1.5*iqr

  lower_outliers = df[df[col] < lower_bound]
  upper_outliers = df[df[col] > upper_bound]

  outliers_list.append(lower_outliers)
  outliers_list.append(upper_outliers)

outliers_df = pd.concat(outliers_list)

clean_PART_DATA = df.drop(outliers_df.index)
display(clean_PART_DATA.head())

print("Shape of original data:", df.shape)
print("Shape of cleaned data:", clean_PART_DATA.shape)

for col in numeric_cols:plt.figure(figsize=(6,5))
sns.histplot(df[col], kde=True ,bins=30)
plt.title(f"distribution of {col}")
plt.show

df = df.dropna()

X = df.drop("final_grade", axis=1)
y = df["final_grade"]

X = pd.get_dummies(X, drop_first=True)

from sklearn.model_selection import train_test_split

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

print("âœ… Ø¯Ø§Ø¯Ù‡ Ø¢Ù…ÙˆØ²Ø´:", X_train.shape)
print("âœ… Ø¯Ø§Ø¯Ù‡ ØªØ³Øª:", X_test.shape)

from sklearn.linear_model import LinearRegression
from sklearn.metrics import mean_squared_error, r2_score

# ØªØ¹Ø±ÛŒÙ Ù…Ø¯Ù„
model = LinearRegression()

# Ø¢Ù…ÙˆØ²Ø´ Ù…Ø¯Ù„
model.fit(X_train, y_train)

# Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø±ÙˆÛŒ Ø¯Ø§Ø¯Ù‡ ØªØ³Øª
y_pred = model.predict(X_test)

# Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…Ø¯Ù„
mse = mean_squared_error(y_test, y_pred)
r2 = r2_score(y_test, y_pred)

print("âœ… Ø®Ø·Ø§ÛŒ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù…Ø±Ø¨Ø¹Ø§Øª (MSE):", mse)
print("âœ… Ø¶Ø±ÛŒØ¨ ØªØ¹ÛŒÛŒÙ† (R2):", r2)

import matplotlib.pyplot as plt

plt.figure(figsize=(6,6))
plt.scatter(y_test, y_pred, alpha=0.7, color="blue")
plt.xlabel("Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ§Ù‚Ø¹ÛŒ")
plt.ylabel("Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒØ´Ø¯Ù‡")
plt.title("Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù‚Ø¹ÛŒ")
plt.plot([y.min(), y.max()], [y.min(), y.max()], "r--")
plt.show()

from sklearn.ensemble import RandomForestRegressor

# Ù…Ø¯Ù„ Ù†Ù‡Ø§ÛŒÛŒ
final_model = RandomForestRegressor(n_estimators=200, random_state=42)
final_model.fit(X, y)

import numpy as np

# ÙˆØ±ÙˆØ¯ÛŒ Ø¬Ø¯ÛŒØ¯
new_student_data = {'study_hours_per_week': [7],
                    'sleep_hours_per_day': [4],
                    'attendance_percentage': [90],
                    'assignments_completed': [0],  # Assuming a default value
                    'participation_level': ['medium'], # Assuming a default value
                    'internet_access': ['Yes'], # Assuming a default value
                    'parental_education': ['High School'], # Assuming a default value
                    'extracurricular': ['Yes'], # Assuming a default value
                    'part_time_job': ['No'] # Assuming a default value
                    }

new_student_df = pd.DataFrame(new_student_data)

# Apply one-hot encoding to match the training data format
new_student_encoded = pd.get_dummies(new_student_df, drop_first=True)

# Ensure all columns from the original training data are present, fill with 0 if not
missing_cols = set(X.columns) - set(new_student_encoded.columns)
for c in missing_cols:
    new_student_encoded[c] = 0

# Ensure the order of columns is the same as in the training data
new_student_encoded = new_student_encoded[X.columns]


# Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ
predicted_score = final_model.predict(new_student_encoded)
print("ğŸ¯ Ù†Ù…Ø±Ù‡ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒØ´Ø¯Ù‡:", predicted_score[0])

def predict_score(sleep, study, attendance, assignments_completed, participation_level, internet_access, parental_education, extracurricular, part_time_job):
    data = {'study_hours_per_week': [study],
            'sleep_hours_per_day': [sleep],
            'attendance_percentage': [attendance],
            'assignments_completed': [assignments_completed],
            'participation_level': [participation_level],
            'internet_access': [internet_access],
            'parental_education': [parental_education],
            'extracurricular': [extracurricular],
            'part_time_job': [part_time_job]
            }
    new_student_df = pd.DataFrame(data)

    # Apply one-hot encoding to match the training data format
    new_student_encoded = pd.get_dummies(new_student_df, drop_first=True)

    # Ensure all columns from the original training data are present, fill with 0 if not
    missing_cols = set(X.columns) - set(new_student_encoded.columns)
    for c in missing_cols:
        new_student_encoded[c] = 0

    # Ensure the order of columns is the same as in the training data
    new_student_encoded = new_student_encoded[X.columns]

    score = final_model.predict(new_student_encoded)[0]
    return score

# Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡:
# You will need to provide values for all the input features
print("Ù†Ù…Ø±Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:", predict_score(8, 3, 95, 0.5, 'medium', 'Yes', 'High School', 'Yes', 'No'))

import re
import numpy as np
import pandas as pd

def extract_features(text):
    data = {}

    # Ù…Ø·Ø§Ù„Ø¹Ù‡
    study = re.search(r'(\d+)\s*Ø³Ø§Ø¹Øª\s*Ù…Ø·Ø§Ù„Ø¹Ù‡', text)
    data['study_hours_per_week'] = [float(study.group(1)) if study else 0]

    # Ø®ÙˆØ§Ø¨
    sleep = re.search(r'(\d+)\s*Ø³Ø§Ø¹Øª\s*Ù…ÛŒ.?Ø®ÙˆØ§Ø¨Ù‡', text)
    data['sleep_hours_per_day'] = [float(sleep.group(1)) if sleep else 0]

    # Ø­Ø¶ÙˆØ±
    attendance = re.search(r'(\d+)%', text)
    data['attendance_percentage'] = [float(attendance.group(1))/100 if attendance else 0]

    # ØªÚ©Ø§Ù„ÛŒÙ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ (Assuming a default or placeholder if not mentioned)
    assignments_completed = re.search(r'(\d+)\s*ØªÚ©Ù„ÛŒÙ\s*Ø§Ù†Ø¬Ø§Ù…\s*Ø´Ø¯Ù‡', text) # Example pattern
    data['assignments_completed'] = [float(assignments_completed.group(1)) if assignments_completed else 0]


    # Ø³Ø·Ø­ Ù…Ø´Ø§Ø±Ú©Øª (Assuming a default or placeholder if not mentioned, needs more sophisticated text parsing)
    participation_level_match = re.search(r'Ø³Ø·Ø­ Ù…Ø´Ø§Ø±Ú©Øª:\s*(low|medium|high)', text) # Example pattern
    data['participation_level'] = [participation_level_match.group(1) if participation_level_match else 'unknown'] # Default to 'unknown' or a sensible default


    # Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª (Assuming a default or placeholder if not mentioned)
    internet_access_match = re.search(r'Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª:\s*(Yes|No)', text) # Example pattern
    data['internet_access'] = [internet_access_match.group(1) if internet_access_match else 'unknown'] # Default to 'unknown'


    # ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ† (Assuming a default or placeholder if not mentioned)
    parental_education_match = re.search(r'ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†:\s*(High School|Bachelor|Master|PhD)', text) # Example pattern
    data['parental_education'] = [parental_education_match.group(1) if parental_education_match else 'unknown'] # Default to 'unknown'


    # ÙØ¹Ø§Ù„ÛŒØª ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡ (Assuming a default or placeholder if not mentioned)
    extracurricular_match = re.search(r'ÙØ¹Ø§Ù„ÛŒØª ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡:\s*(Yes|No)', text) # Example pattern
    data['extracurricular'] = [extracurricular_match.group(1) if extracurricular_match else 'unknown'] # Default to 'unknown'


    # Ø´ØºÙ„ Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª (Assuming a default or placeholder if not mentioned)
    part_time_job_match = re.search(r'Ø´ØºÙ„ Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª:\s*(Yes|No)', text) # Example pattern
    data['part_time_job'] = [part_time_job_match.group(1) if part_time_job_match else 'unknown'] # Default to 'unknown'


    return pd.DataFrame(data)

# ÙˆØ±ÙˆØ¯ÛŒ Ù…ØªÙ†ÛŒ
text_input = "Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±ÙˆØ²ÛŒ Û¶ Ø³Ø§Ø¹Øª Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¨Ù‡ØŒ Û´ Ø³Ø§Ø¹Øª Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ùˆ Û¸ÛµÙª Ø­Ø¶ÙˆØ± Ø¯Ø§Ø±Ù‡. Ø³Ø·Ø­ Ù…Ø´Ø§Ø±Ú©Øª: mediumØŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª: YesØŒ ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†: High SchoolØŒ ÙØ¹Ø§Ù„ÛŒØª ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡: YesØŒ Ø´ØºÙ„ Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª: NoØŒ 2 ØªÚ©Ù„ÛŒÙ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡"

# Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§
new_student_df = extract_features(text_input)

# Ø§Ø¹Ù…Ø§Ù„ One-Hot Encoding Ù…Ø´Ø§Ø¨Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¢Ù…ÙˆØ²Ø´
new_student_encoded = pd.get_dummies(new_student_df, drop_first=True)

# Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ÙˆØ¬ÙˆØ¯ ØªÙ…Ø§Ù… Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø¯Ù‡ Ø¢Ù…ÙˆØ²Ø´ØŒ Ù¾Ø± Ú©Ø±Ø¯Ù† Ø¨Ø§ 0 Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯
missing_cols = set(X.columns) - set(new_student_encoded.columns)
for c in missing_cols:
    new_student_encoded[c] = 0

# Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ØªØ±ØªÛŒØ¨ ÛŒÚ©Ø³Ø§Ù† Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ø¢Ù…ÙˆØ²Ø´
new_student_encoded = new_student_encoded[X.columns]


# Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ
predicted_score = final_model.predict(new_student_encoded)[0]
print("ğŸ¯ Ù†Ù…Ø±Ù‡ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒØ´Ø¯Ù‡:", predicted_score)

# Use the last text input from the user
extracted_data = extract_features(text_input_from_user)

# Display the extracted features
print("Extracted features from the text input:")
display(extracted_data)

import re
import pandas as pd

def extract_features(text):
    data = {}

    # ğŸŸ¢ Ù…Ø·Ø§Ù„Ø¹Ù‡ (Ù…Ø«Ø§Ù„: "Û´ Ø³Ø§Ø¹Øª Ù…Ø·Ø§Ù„Ø¹Ù‡"ØŒ "Ù…Ø·Ø§Ù„Ø¹Ù‡ Û´ Ø³Ø§Ø¹ØªÙ‡")
    study = re.search(r'(\d+)\s*(?:Ø³Ø§Ø¹Øª)?\s*Ù…Ø·Ø§Ù„Ø¹Ù‡', text)
    data['study_hours_per_week'] = [float(study.group(1)) if study else 0]

    # ğŸŸ¢ Ø®ÙˆØ§Ø¨ (Ù…Ø«Ø§Ù„: "Û¶ Ø³Ø§Ø¹Øª Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¨Ù‡"ØŒ "Ø®ÙˆØ§Ø¨Ø´ Û¶ Ø³Ø§Ø¹ØªÙ‡")
    sleep = re.search(r'(\d+)\s*(?:Ø³Ø§Ø¹Øª)?\s*(?:Ù…ÛŒ.?Ø®ÙˆØ§Ø¨Ù‡|Ø®ÙˆØ§Ø¨)', text)
    data['sleep_hours_per_day'] = [float(sleep.group(1)) if sleep else 0]

    # ğŸŸ¢ Ø­Ø¶ÙˆØ± (Ù…Ø«Ø§Ù„: "Û¸ÛµÙª Ø­Ø¶ÙˆØ±"ØŒ "Ø­Ø¶ÙˆØ± Û¸Ûµ Ø¯Ø±ØµØ¯")
    attendance = re.search(r'(\d+)\s*[%Ùª]|\s*(\d+)\s*Ø¯Ø±ØµØ¯\s*Ø­Ø¶ÙˆØ±', text)
    if attendance:
        val = attendance.group(1) or attendance.group(2)
        data['attendance_percentage'] = [float(val)]
    else:
        data['attendance_percentage'] = [0]

    # ğŸŸ¢ ØªÚ©Ø§Ù„ÛŒÙ (Ù…Ø«Ø§Ù„: "Û² ØªÚ©Ù„ÛŒÙ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡"ØŒ "Ûµ ØªØ§ homework")
    assignments = re.search(r'(\d+)\s*(?:ØªÚ©Ù„ÛŒÙ|homework)', text, re.IGNORECASE)
    data['assignments_completed'] = [float(assignments.group(1)) if assignments else 0]

    # ğŸŸ¢ Ø³Ø·Ø­ Ù…Ø´Ø§Ø±Ú©Øª
    participation = re.search(r'(low|medium|high)', text, re.IGNORECASE)
    data['participation_level'] = [participation.group(1).lower() if participation else 'medium']

    # ğŸŸ¢ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª
    internet = re.search(r'(?:Ø§ÛŒÙ†ØªØ±Ù†Øª|internet)[: ]*\s*(Yes|No)', text, re.IGNORECASE)
    data['internet_access'] = [internet.group(1).capitalize() if internet else 'No']

    # ğŸŸ¢ ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†
    education = re.search(r'(High School|Bachelor|Master|PhD)', text, re.IGNORECASE)
    data['parental_education'] = [education.group(1) if education else 'High School']

    # ğŸŸ¢ ÙØ¹Ø§Ù„ÛŒØª ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡
    extra = re.search(r'(?:ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡|extracurricular)[: ]*\s*(Yes|No)', text, re.IGNORECASE)
    data['extracurricular'] = [extra.group(1).capitalize() if extra else 'No']

    # ğŸŸ¢ Ø´ØºÙ„ Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª
    job = re.search(r'(?:Ø´ØºÙ„|job|Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª)[: ]*\s*(Yes|No)', text, re.IGNORECASE)
    data['part_time_job'] = [job.group(1).capitalize() if job else 'No']

    return pd.DataFrame(data)

text_input = "Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Û¶ Ø³Ø§Ø¹Øª Ø®ÙˆØ§Ø¨ Ø¯Ø§Ø±Ù‡ØŒ Ø±ÙˆØ²ÛŒ Û´ Ø³Ø§Ø¹Øª Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø­Ø¶ÙˆØ±Ø´ Û¸Ûµ Ø¯Ø±ØµØ¯ Ø¨ÙˆØ¯Ù‡. Ø³Ø·Ø­ Ù…Ø´Ø§Ø±Ú©Øª highØŒ Ø§ÛŒÙ†ØªØ±Ù†Øª: yesØŒ ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ† MasterØŒ ÙÙˆÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡: NoØŒ Ø´ØºÙ„ Ù¾Ø§Ø±Ù‡ ÙˆÙ‚Øª: YesØŒ 3 homework Ø¯Ø§Ø±Ù‡."

features = extract_features(text_input)
print(features)

import streamlit as st
import pandas as pd
import re

# Ù‡Ù…ÙˆÙ† ØªØ§Ø¨Ø¹ extract_features Ú©Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ù†ÙˆØ´ØªÛŒÙ…
def extract_features(text):
    data = {}
    study = re.search(r'(\d+)\s*(?:Ø³Ø§Ø¹Øª)?\s*Ù…Ø·Ø§Ù„Ø¹Ù‡', text)
    data['study_hours_per_week'] = [float(study.group(1)) if study else 0]
    sleep = re.search(r'(\d+)\s*(?:Ø³Ø§Ø¹Øª)?\s*(?:Ù…ÛŒ.?Ø®ÙˆØ§Ø¨Ù‡|Ø®ÙˆØ§Ø¨)', text)
    data['sleep_hours_per_day'] = [float(sleep.group(1)) if sleep else 0]
    return pd.DataFrame(data)

# Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ
st.title("ğŸ“ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù†Ù…Ø±Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²")

user_text = st.text_area("Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:", "")

if st.button("Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ"):
    if user_text.strip():
        features = extract_features(user_text)

        # Ù‡Ù…Ø§Ù‡Ù†Ú¯â€ŒØ³Ø§Ø²ÛŒ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ (X.columns Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø´Ù‡)
        new_encoded = pd.get_dummies(features, drop_first=True)
        missing_cols = set(X.columns) - set(new_encoded.columns)
        for c in missing_cols:
            new_encoded[c] = 0
        new_encoded = new_encoded[X.columns]

        # Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ
        score = final_model.predict(new_encoded)[0]
        st.success(f"ğŸ¯ Ù†Ù…Ø±Ù‡ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒØ´Ø¯Ù‡: {score:.2f}")
    else:
        st.warning("Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.")

!pip install streamlit

!pip install pyngrok



from google.colab import drive
drive.mount('/content/drive')